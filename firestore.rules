rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Default security rules:
    // - Public read access is allowed for all collections. This is necessary for
    //   the public pages of your app to display data.
    // - All direct writes from clients are denied. This is a critical security
    //   measure.
    //
    // All write operations (creating raffles, adding withdrawals) are handled
    // by Next.js Server Actions, which use the Firebase Admin SDK. The Admin SDK
    // runs with elevated privileges on the server and bypasses these client-side
    // security rules. This is a secure and standard pattern.

    match /{document=**} {
      allow read: if true;
      allow write: if false;
    }
  }
}
